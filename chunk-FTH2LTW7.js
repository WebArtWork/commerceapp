import{a as y}from"./chunk-TNAEBZAS.js";import{e as k}from"./chunk-WS3SNFIS.js";import{K as m,L as u,M as h,Q as d,W as f,Wa as p,Xa as a,bb as _,fb as v,gb as g,nb as C,s as l,ub as F,wb as b}from"./chunk-GZ7BSFZ3.js";var w={formId:"commerce",title:"Commerce",components:[{name:"Text",key:"name",focused:!0,fields:[{name:"Placeholder",value:"fill commerce title"},{name:"Label",value:"Title"}]},{name:"Text",key:"description",fields:[{name:"Placeholder",value:"fill commerce description"},{name:"Label",value:"Description"}]}]};var S=(()=>{class t{changeAuthorsik(c,r){this._http.post("/api/commerce/changeAuthor",{author:r,commerce:c}).subscribe({next:()=>console.log("Author changed successfully"),error:o=>console.error("Error changing author:",o)})}get rows(){return this._commerceService.commerces}constructor(c,r,o,i,s,A){this._translate=c,this._commerceService=r,this._alert=o,this._form=i,this._core=s,this._http=A,this.columns=["name","description"],this.form=this._form.getForm("commerce",w),this.config={create:()=>{this._form.modal(this.form,{label:"Create",click:(e,n)=>{this._commerceService.create(e),n()}})},update:e=>{this._form.modal(this.form,[],e).then(n=>{this._core.copy(n,e),this._commerceService.update(e)})},delete:e=>{this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this commerce?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>{this._commerceService.delete(e)}}]})},buttons:[a.commerceArticleUrl?{icon:"article",hrefFunc:e=>a.commerceArticleUrl+"/Commerce/"+e._id}:null,{icon:"list_alt",hrefFunc:e=>"/commerce/commerceorders/"+e._id},{icon:"store",hrefFunc:e=>"/commerce/commercestores/"+e._id},{icon:"home",hrefFunc:e=>"/commerce/commercewarehouses/"+e._id},{icon:"production_quantity_limits",hrefFunc:e=>"/commerce/commerceproducts/"+e._id},{icon:"room_service",hrefFunc:e=>"/commerce/commerceservices/"+e._id},{icon:"photo_camera",hrefFunc:e=>"/commerce/commerceportfolios/"+e._id},{icon:"content_paste",hrefFunc:e=>"/commerce/commercecontents/"+e._id},{icon:"style",hrefFunc:e=>"/commerce/commercetags/commerce/"+e._id},{icon:"branding_watermark",hrefFunc:e=>"/commerce/commercebrands/"+e._id},{icon:"percent",hrefFunc:e=>"/commerce/commercediscounts/"+e._id},{icon:"person",click:e=>{this._form.modal(this.formAuthor,{label:"Change",click:(n,M)=>{this.changeAuthorsik(e._id,n.author),M()}})}},{icon:"cloud_download",click:e=>{this._form.modalUnique("commerce","url",e)}}],headerButtons:[{icon:"playlist_add",click:this._bulkManagement(),class:"playlist"},{icon:"edit_note",click:this._bulkManagement(!1),class:"edit"}]},this.formAuthor=this._form.getForm("change author",{formId:"change author",title:"Change Author",components:[{name:"Text",key:"author",focused:!0,fields:[{name:"Placeholder",value:"Enter new author name"},{name:"Label",value:"New Author"}]}]})}_bulkManagement(c=!0){return()=>{this._form.modalDocs(c?[]:this.rows).then(r=>{if(c)for(let o of r)this._commerceService.create(o);else{for(let o of this.rows)r.find(i=>i._id===o._id)||this._commerceService.delete(o);for(let o of r){let i=this.rows.find(s=>s._id===o._id);i?(this._core.copy(o,i),this._commerceService.update(i)):(o.__created=!1,this._commerceService.create(o))}}})}}static{this.\u0275fac=function(r){return new(r||t)(m(C),m(y),m(g),m(b),m(_),m(v))}}static{this.\u0275cmp=u({type:t,selectors:[["ng-component"]],standalone:!1,decls:1,vars:3,consts:[["title","\u041A\u043E\u043C\u0435\u0440\u0446\u0456\u0457",3,"columns","config","rows"]],template:function(r,o){r&1&&f(0,"wtable",0),r&2&&d("columns",o.columns)("config",o.config)("rows",o.rows)},dependencies:[F],encapsulation:2})}}return t})();var j=[{path:"",component:S}],Y=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=h({type:t})}static{this.\u0275inj=l({imports:[p.forChild(j),k]})}}return t})();export{Y as CommercesModule};
